var simplify = require("simplify-js")

var polyLine = JSON.parse("[[51.53425000000001,0.32425000000000004],[51.535700000000006,0.32206],[51.53773,0.32255],[51.53831,0.32307],[51.53954,0.32277],[51.54032,0.32249],[51.54055,0.32263000000000003],[51.54063000000001,0.32474000000000003],[51.54066,0.32521],[51.540940000000006,0.3265],[51.54225,0.33551000000000003],[51.54265,0.33669000000000004],[51.5429,0.33735000000000004],[51.54308,0.33712000000000003],[51.54379,0.33608000000000005],[51.544090000000004,0.33577],[51.54495000000001,0.33511],[51.545440000000006,0.33491000000000004],[51.546870000000006,0.33440000000000003],[51.548590000000004,0.33430000000000004],[51.55096,0.33394],[51.55207000000001,0.33343],[51.556110000000004,0.33128],[51.564620000000005,0.33087000000000005],[51.567220000000006,0.33070000000000005],[51.57208000000001,0.32980000000000004],[51.57544000000001,0.33032],[51.57640000000001,0.33008000000000004],[51.576100000000004,0.32649],[51.57488000000001,0.31368],[51.57448,0.30295],[51.57421,0.29561000000000004],[51.57376000000001,0.29184000000000004],[51.571560000000005,0.28569],[51.571810000000006,0.2843],[51.572540000000004,0.28374000000000005],[51.573690000000006,0.28387],[51.57885,0.28105],[51.5814,0.2787],[51.583400000000005,0.27624000000000004],[51.585660000000004,0.27335000000000004],[51.588770000000004,0.27075000000000005],[51.59214000000001,0.26942000000000005],[51.596790000000006,0.26858000000000004],[51.602410000000006,0.26745],[51.605230000000006,0.26582],[51.60734000000001,0.26384],[51.61225,0.25794],[51.614580000000004,0.25581000000000004],[51.617140000000006,0.25237000000000004],[51.618950000000005,0.24869000000000002],[51.62135000000001,0.24265000000000003],[51.62447,0.23602],[51.626200000000004,0.23276000000000002],[51.63139,0.22384],[51.63723,0.21611000000000002],[51.64197000000001,0.21079],[51.64612,0.20535],[51.65016000000001,0.19829000000000002],[51.65303,0.19134],[51.657830000000004,0.17429],[51.660270000000004,0.16929000000000002],[51.664210000000004,0.16433],[51.665760000000006,0.16188000000000002],[51.66736,0.15845],[51.668910000000004,0.15338000000000002],[51.67147000000001,0.14603000000000002],[51.67533,0.13838],[51.678160000000005,0.13085000000000002],[51.67904000000001,0.12703],[51.679770000000005,0.12160000000000001],[51.68021,0.11808],[51.682300000000005,0.11055000000000001],[51.68451,0.10571000000000001],[51.688300000000005,0.09882],[51.68891000000001,0.09691000000000001],[51.68956000000001,0.09325000000000001],[51.68947000000001,0.08827],[51.688520000000004,0.07757],[51.68827,0.06768],[51.68753,0.06322],[51.684960000000004,0.05208],[51.68294,0.045070000000000006],[51.68086,0.04054000000000001],[51.67871,0.033460000000000004],[51.677910000000004,0.027260000000000003],[51.67804,0.02093],[51.679570000000005,0.01148],[51.68097,0.0017800000000000001],[51.680420000000005,-0.008180000000000002],[51.68048,-0.012390000000000002],[51.680800000000005,-0.01949],[51.681360000000005,-0.02391],[51.682050000000004,-0.02891],[51.682300000000005,-0.03524],[51.68278,-0.04399],[51.68303,-0.05217],[51.68247,-0.057210000000000004],[51.682520000000004,-0.061540000000000004],[51.68348,-0.06668],[51.68833000000001,-0.07904000000000001],[51.689400000000006,-0.08487],[51.68948,-0.08784],[51.68961,-0.09276000000000001],[51.69019,-0.09788000000000001],[51.691340000000004,-0.10452],[51.6914,-0.10800000000000001],[51.69109,-0.11047000000000001],[51.69005000000001,-0.11394000000000001],[51.68867,-0.11789000000000001],[51.68815000000001,-0.12183000000000001],[51.688570000000006,-0.12901],[51.68842,-0.13360000000000002],[51.687850000000005,-0.13766],[51.685860000000005,-0.14458000000000001],[51.68529,-0.14767000000000002],[51.685230000000004,-0.15111000000000002],[51.68574,-0.15441000000000002],[51.687400000000004,-0.16061],[51.68775,-0.16382000000000002],[51.687340000000006,-0.16860000000000003],[51.68524000000001,-0.17448000000000002],[51.68431,-0.17711000000000002],[51.68381,-0.17974],[51.68379,-0.18423],[51.68600000000001,-0.19863000000000003],[51.685880000000004,-0.20411],[51.684580000000004,-0.20849],[51.68377,-0.21080000000000002],[51.683400000000006,-0.21318],[51.68422,-0.22063000000000002],[51.68531,-0.22584],[51.68627000000001,-0.22885000000000003],[51.68717,-0.23088000000000003],[51.68882000000001,-0.23345000000000002],[51.69342,-0.23864000000000002],[51.695330000000006,-0.24032],[51.69733,-0.24133000000000002],[51.69914000000001,-0.24242000000000002],[51.70073000000001,-0.24399],[51.70384000000001,-0.24935000000000002],[51.706480000000006,-0.25475000000000003],[51.71103,-0.26317],[51.713370000000005,-0.26649],[51.715,-0.27009],[51.715880000000006,-0.2747],[51.71569,-0.28066],[51.71439,-0.28516],[51.71276,-0.28814],[51.71137,-0.29065],[51.710100000000004,-0.2948],[51.709720000000004,-0.2997],[51.71166,-0.31577000000000005],[51.71162,-0.32341000000000003],[51.71018,-0.33220000000000005],[51.70957000000001,-0.33661],[51.70926000000001,-0.34235000000000004],[51.709680000000006,-0.35053],[51.71092,-0.35779000000000005],[51.713860000000004,-0.36768],[51.71562,-0.37385],[51.71636,-0.37981000000000004],[51.71627,-0.38508000000000003],[51.71542,-0.39057000000000003],[51.71407000000001,-0.39804],[51.71399,-0.40776],[51.71401,-0.41558000000000006],[51.71360000000001,-0.41930000000000006],[51.711690000000004,-0.42609],[51.71040000000001,-0.42901000000000006],[51.70674,-0.43443000000000004],[51.70468,-0.43803000000000003],[51.70255,-0.44110000000000005],[51.69995,-0.44391],[51.69651,-0.44589000000000006],[51.695220000000006,-0.44632000000000005],[51.691280000000006,-0.44682000000000005],[51.68712000000001,-0.44701],[51.68473,-0.44789],[51.682230000000004,-0.44998000000000005],[51.67982000000001,-0.45360000000000006],[51.674600000000005,-0.46325000000000005],[51.67324000000001,-0.46777],[51.67250000000001,-0.47477],[51.671640000000004,-0.48297000000000007],[51.67078000000001,-0.48634000000000005],[51.6694,-0.48939000000000005],[51.66783,-0.49158],[51.66592000000001,-0.49321000000000004],[51.66396,-0.49406000000000005],[51.66228,-0.49424000000000007],[51.659620000000004,-0.49410000000000004],[51.6565,-0.49426000000000003],[51.65525,-0.49484000000000006],[51.65301,-0.49679000000000006],[51.64997,-0.49843000000000004],[51.648250000000004,-0.49910000000000004],[51.644470000000005,-0.50095],[51.64193,-0.50327],[51.639230000000005,-0.50712],[51.63720000000001,-0.5106700000000001],[51.633720000000004,-0.51481],[51.62796,-0.52085],[51.62566,-0.5227700000000001],[51.62342,-0.5241100000000001],[51.620900000000006,-0.52505],[51.6165,-0.52591],[51.60186,-0.52975],[51.59662,-0.53154],[51.589800000000004,-0.53325],[51.584900000000005,-0.5337500000000001],[51.58167,-0.53473],[51.57898,-0.5355500000000001],[51.57732000000001,-0.53574],[51.573620000000005,-0.53552],[51.571250000000006,-0.53507],[51.566750000000006,-0.53383],[51.56477,-0.53302],[51.5606,-0.53107],[51.55749,-0.5293],[51.553700000000006,-0.5266200000000001],[51.551190000000005,-0.5239100000000001],[51.548750000000005,-0.5196900000000001],[51.547320000000006,-0.51585],[51.546130000000005,-0.51073],[51.54489,-0.5071300000000001],[51.54229,-0.50351],[51.539950000000005,-0.5020300000000001],[51.53676,-0.5005900000000001],[51.533030000000004,-0.49938000000000005],[51.528830000000006,-0.49856000000000006],[51.526140000000005,-0.49827000000000005],[51.5221,-0.49836],[51.51787,-0.49922000000000005],[51.5142,-0.50111],[51.51241,-0.50165],[51.509240000000005,-0.5015900000000001],[51.50592,-0.49993000000000004],[51.502370000000006,-0.4968],[51.49817,-0.4937],[51.49736000000001,-0.49337000000000003],[51.49663,-0.49372000000000005],[51.495090000000005,-0.49516000000000004],[51.49392,-0.49670000000000003],[51.49394,-0.49874],[51.494420000000005,-0.5014000000000001],[51.494080000000004,-0.5056],[51.4932,-0.51215],[51.49297000000001,-0.51797],[51.49309,-0.53237],[51.49201000000001,-0.5412],[51.48897,-0.55301],[51.48698,-0.56022],[51.48649,-0.5644600000000001],[51.486540000000005,-0.5681200000000001],[51.48742000000001,-0.5734100000000001],[51.48845000000001,-0.57645],[51.48997000000001,-0.57942],[51.491670000000006,-0.58164],[51.49403,-0.58399],[51.498560000000005,-0.5885400000000001],[51.49989000000001,-0.59053],[51.50103000000001,-0.5931500000000001],[51.501900000000006,-0.59679],[51.50213,-0.6002500000000001],[51.502030000000005,-0.60794],[51.50251,-0.6139600000000001],[51.51153000000001,-0.65568],[51.51158,-0.65722],[51.5112,-0.6581300000000001],[51.51066,-0.6582],[51.51024,-0.65712],[51.510760000000005,-0.65607],[51.5116,-0.65566],[51.514920000000004,-0.65464],[51.519780000000004,-0.6548400000000001],[51.520050000000005,-0.65503],[51.520540000000004,-0.65685],[51.520500000000006,-0.6591800000000001],[51.520430000000005,-0.6619200000000001],[51.52116,-0.6669],[51.52113000000001,-0.66742],[51.519760000000005,-0.6668700000000001],[51.5183,-0.66595],[51.517900000000004,-0.66434],[51.517050000000005,-0.6630900000000001],[51.5155,-0.66188],[51.51315,-0.6624300000000001],[51.511120000000005,-0.6632],[51.50658000000001,-0.6635300000000001],[51.50448,-0.6649900000000001],[51.503620000000005,-0.6638400000000001],[51.503190000000004,-0.66083],[51.502750000000006,-0.6589100000000001],[51.50157,-0.6577700000000001],[51.500400000000006,-0.6549100000000001],[51.50023,-0.65405],[51.500890000000005,-0.6539900000000001],[51.50119,-0.65436],[51.501900000000006,-0.65441],[51.503980000000006,-0.65398]]");


describe("Will simplify polyline", function(){
    it("using Douglas-Peucker Polygon/Line Simplification", function(done){

        var points = [];

        polyLine.forEach(function(elem){
            points[points.length] = {x: elem[0], y:elem[1]};
        });

        var simplifiedPoints = simplify.simplify(points, 0.006);
        simplifiedPoints.length.should.be.below(polyLine.length);
        done();
    });
});